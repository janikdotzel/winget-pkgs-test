name: Update WinGet Package

on:
  release:
    types: [published]
  workflow_dispatch:  # Allows manual triggering for testing
    inputs:
      version:
        description: 'Version to publish (e.g., 3.0.31)'
        required: true
        type: string

jobs:
  update-winget:
    name: Update WinGet Package
    runs-on: windows-latest

    steps:
      - name: Update WinGet package
        uses: vedantmgoyal9/winget-releaser@v2
        with:
          identifier: Akka.AkkaCli
          token: ${{ secrets.WINGET_TOKEN }}
          # Optional: uncomment to customize
          # version: ${{ github.event.inputs.version || github.event.release.tag_name }}
          # installers-regex: '\\.zip$'  # Only process .zip files
